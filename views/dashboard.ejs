<%- include('partials/_header') %> <%- include('partials/_navigation') %>

<% if (user.role == "trainer") {  %> 
<div class="back_re">
  <div class="container">
    <div class="row">
      <div class="col-md-12">
        <div class="title">
          <h2><%= user.name %></h2>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="services">
  <div class="container">
    <div class="row">
      <div class="col-md-12">
        <div class="titlepage">
          <!-- Button trigger modal -->
          <button
            type="button"
            class="btn btn-success mb-3"
            data-toggle="modal"
            data-target="#addWorkout"
          >
            Create New Workout
          </button>
          <% for (let i = 0; i<workouts.length;i++) { %> 
            <div class="col-md-4">
            <a href="/workout/<%= workouts[i].slug %>">   
               <div class="se_img">
                  <figure><img src="/<%= workouts[i].image  %>" alt="#"/></figure>
               </div>
               <div class="text-center">
                 <h3 class="text-white"><%= workouts[i].name %></h3>
               </div>
            </a>
            </div>
            <% } %> 
          <!-- Modal -->
          <div
            class="modal fade"
            id="addWorkout"
            tabindex="-1"
            role="dialog"
            aria-labelledby="myModalLabel"
          >
            <div
              class="modal-dialog modal-dialog-centered modal-lg"
              role="document"
            >
              <div class="modal-content">
                <div class="modal-body customer-box">
                  <!-- Tab Panes -->
                  <div class="tab-content">
                    <div class="tab-pane active" id="Login">
                      <form
                        method="post"
                        action="/workout"
                        class="tm-contact-form"
                        enctype="multipart/form-data"
                      >
                        <div class="form-group mb-3">
                          <input
                            type="text"
                            name="name"
                            class="form-control rounded-0"
                            placeholder="Workout Name"
                            required
                          />
                        </div>
                        <div class="form-group">
                          <input type="hidden" name="role" class="form-control"  value="<%= user.role %>">
                        </div>
                          <div class="form-group mb-3">
                            <select name="category" class="form-control">
                              <option value="" disabled selected>Select category</option>    
                              <% for(let i = 0; i<categories.length; i++) { %> 
                              <option value="<%= categories[i]._id %>"><%= categories[i].name %> </option>
                              <% } %> 
                              </select>
                          </div>
                        <div class="form-group mb-3">
                          <textarea
                            rows="8"
                            name="description"
                            class="form-control rounded-0"
                            placeholder="Workout Description"
                            required
                          ></textarea>
                        </div>
                        <div class="form-group mb-3">
                          <input
                            type="file"
                            name="image"
                            class="form-control-file rounded-0"
                          />
                        </div>
                        <div class="form-group mb-0">
                          <button
                            type="submit"
                            class="btn btn-primary rounded-0 d-block ml-auto mr-0 tm-btn-animate tm-btn-submit tm-icon-submit"
                          >
                            <span>Add</span>
                          </button>
                        </div>
                      </form>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<% } %> 

<% if(user.role=='member') { %> 
  <div class="back_re">
    <div class="container">
      <div class="row">
        <div class="col-md-12">
          <div class="title">
            <h2><%= user.name %></h2>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div  class="services">
    <div class="container">
       <div class="row">
          <div class="col-md-12">
             <div class="titlepage">
                <p>You can follow the workouts you have registered.</p>
             </div>
          </div>
       </div>
       <div class="row">
          <% for (let i = 0; i<user.workouts.length;i++) { %> 
          <div class="col-md-4">
          <a href="/workout/<%= user.workouts[i].slug %>">   
             <div class="se_img">
                <figure><img src="/<%= user.workouts[i].image  %>" alt="#"/></figure>
             </div>
             <div class="text-center">
               <h3 class="text-white"><%= user.workouts[i].name %></h3>
             </div>
          </a>
          </div>
          <% } %> 
       </div>
    </div>
 </div>
<% } %> 

<%- include('partials/_footer') %>
